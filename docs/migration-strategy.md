# æ¸è¿›å¼è¿ç§»ç­–ç•¥

## ğŸ¯ è¿ç§»ç›®æ ‡

åˆ›å»ºä¸€ä¸ª JavaScript å’Œ TypeScript æ··åˆçš„å¼€å‘ç¯å¢ƒï¼Œè®©å¼€å‘è€…å¯ä»¥ï¼š
- æ–°åŠŸèƒ½ä¼˜å…ˆç”¨ JavaScript å¿«é€Ÿå¼€å‘
- æ ¸å¿ƒæ¨¡å—ä¿æŒ TypeScript çš„ç±»å‹å®‰å…¨
- é€æ­¥å­¦ä¹ å’Œåº”ç”¨ TypeScript ç‰¹æ€§

## ğŸ“Š æ¨¡å—åˆ†ç±»

### ğŸŸ¢ ä¼˜å…ˆè¿ç§»ä¸º JavaScriptï¼ˆä½é£é™©ï¼‰

#### 1. å·¥å…·å‡½æ•°æ¨¡å—
```
src/utils/
â”œâ”€â”€ index.ts â†’ index.js          âœ… å¯è¿ç§»
â”œâ”€â”€ platform.ts â†’ platform.js   âœ… å¯è¿ç§»
â”œâ”€â”€ systemInfo.ts â†’ systemInfo.js âœ… å¯è¿ç§»
â””â”€â”€ uploadFile.ts â†’ uploadFile.js âœ… å¯è¿ç§»
```

**è¿ç§»éš¾åº¦**ï¼šâ­
**é¢„è®¡æ—¶é—´**ï¼š2-4å°æ—¶
**é£é™©è¯„ä¼°**ï¼šä½

#### 2. ç®€å•é¡µé¢ç»„ä»¶
```
src/pages/
â”œâ”€â”€ about/about.vue              âœ… ç§»é™¤ lang="ts"
â”œâ”€â”€ index/index.vue              âœ… ç§»é™¤ lang="ts"
â””â”€â”€ login/login.vue              âœ… ç§»é™¤ lang="ts"
```

**è¿ç§»éš¾åº¦**ï¼šâ­
**é¢„è®¡æ—¶é—´**ï¼š1-2å°æ—¶
**é£é™©è¯„ä¼°**ï¼šä½

#### 3. åŸºç¡€ç»„ä»¶
```
src/components/
â””â”€â”€ (æ–°å¢çš„ç®€å•ç»„ä»¶)             âœ… ç›´æ¥ç”¨ JavaScript
```

### ğŸŸ¡ é€‰æ‹©æ€§è¿ç§»ï¼ˆä¸­ç­‰é£é™©ï¼‰

#### 1. çŠ¶æ€ç®¡ç†
```
src/store/
â”œâ”€â”€ theme.ts                     ğŸ”„ å¯é€‰è¿ç§»
â”œâ”€â”€ user.ts                      âš ï¸  å»ºè®®ä¿æŒ TS
â””â”€â”€ token.ts                     âš ï¸  å»ºè®®ä¿æŒ TS
```

**è¿ç§»éš¾åº¦**ï¼šâ­â­
**é¢„è®¡æ—¶é—´**ï¼š4-6å°æ—¶
**é£é™©è¯„ä¼°**ï¼šä¸­ç­‰

#### 2. è·¯ç”±é…ç½®
```
src/router/
â”œâ”€â”€ config.ts â†’ config.js        ğŸ”„ å¯é€‰è¿ç§»
â””â”€â”€ interceptor.ts               âš ï¸  å»ºè®®ä¿æŒ TS
```

### ğŸ”´ ä¿æŒ TypeScriptï¼ˆé«˜é£é™©ï¼‰

#### 1. æƒé™ç®¡ç†ç³»ç»Ÿ
```
src/permission/                  âŒ å¼ºçƒˆå»ºè®®ä¿æŒ TS
â”œâ”€â”€ types/                       âŒ å¤æ‚ç±»å‹å®šä¹‰
â”œâ”€â”€ core/                        âŒ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ store/                       âŒ çŠ¶æ€ç®¡ç†
â””â”€â”€ directives/                  âŒ Vue æŒ‡ä»¤
```

**åŸå› **ï¼š
- åŒ…å«å¤æ‚çš„æšä¸¾å’Œæ¥å£å®šä¹‰
- æ¶‰åŠå®‰å…¨ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
- ç±»å‹æ£€æŸ¥èƒ½æœ‰æ•ˆé˜²æ­¢æƒé™æ¼æ´

#### 2. API æ¥å£å±‚
```
src/api/                         âš ï¸  å»ºè®®ä¿æŒ TS
â”œâ”€â”€ types/                       âŒ æ¥å£ç±»å‹å®šä¹‰
â”œâ”€â”€ login.ts                     âš ï¸  è®¤è¯ç›¸å…³
â””â”€â”€ permission.ts                âŒ æƒé™ç›¸å…³
```

#### 3. HTTP è¯·æ±‚å°è£…
```
src/http/                        âš ï¸  å»ºè®®ä¿æŒ TS
â”œâ”€â”€ types.ts                     âŒ ç±»å‹å®šä¹‰
â”œâ”€â”€ http.ts                      âš ï¸  æ ¸å¿ƒè¯·æ±‚é€»è¾‘
â””â”€â”€ interceptor.ts               âš ï¸  æ‹¦æˆªå™¨é€»è¾‘
```

## ğŸš€ è¿ç§»å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è¿ç§»ï¼ˆç¬¬1å‘¨ï¼‰

#### ç›®æ ‡
- è¿ç§»å·¥å…·å‡½æ•°
- ç®€åŒ–é¡µé¢ç»„ä»¶
- å»ºç«‹æ··åˆå¼€å‘ç¯å¢ƒ

#### å…·ä½“ä»»åŠ¡
1. **è¿ç§» utils ç›®å½•**
   ```bash
   # é‡å‘½åæ–‡ä»¶
   mv src/utils/index.ts src/utils/index.js
   mv src/utils/platform.ts src/utils/platform.js
   mv src/utils/systemInfo.ts src/utils/systemInfo.js
   ```

2. **ç®€åŒ–é¡µé¢ç»„ä»¶**
   ```vue
   <!-- ä¿®æ”¹å‰ -->
   <script lang="ts" setup>
   
   <!-- ä¿®æ”¹å -->
   <script setup>
   ```

3. **éªŒè¯æ„å»º**
   ```bash
   pnpm dev
   pnpm build
   ```

### ç¬¬äºŒé˜¶æ®µï¼šé€‰æ‹©æ€§è¿ç§»ï¼ˆç¬¬2-3å‘¨ï¼‰

#### ç›®æ ‡
- è¿ç§»éæ ¸å¿ƒçŠ¶æ€ç®¡ç†
- ä¼˜åŒ–å¼€å‘ä½“éªŒ
- å»ºç«‹æœ€ä½³å®è·µ

#### å…·ä½“ä»»åŠ¡
1. **è¿ç§»ä¸»é¢˜çŠ¶æ€ç®¡ç†**
   ```javascript
   // src/store/theme.js
   export const useThemeStore = defineStore('theme-store', () => {
     const theme = ref('light')
     const themeVars = ref({})
     
     return { theme, themeVars }
   })
   ```

2. **åˆ›å»º JavaScript ç»„ä»¶æ¨¡æ¿**
   ```vue
   <!-- src/templates/component.vue -->
   <script setup>
   // ç»„ä»¶é€»è¾‘
   </script>
   
   <template>
     <!-- ç»„ä»¶æ¨¡æ¿ -->
   </template>
   ```

### ç¬¬ä¸‰é˜¶æ®µï¼šä¼˜åŒ–å’Œå®Œå–„ï¼ˆç¬¬4å‘¨ï¼‰

#### ç›®æ ‡
- å®Œå–„å¼€å‘æ–‡æ¡£
- å»ºç«‹ä»£ç è§„èŒƒ
- æ€§èƒ½ä¼˜åŒ–

## ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•

### è¿ç§»å‰æ£€æŸ¥
- [ ] ç¡®è®¤æ¨¡å—çš„å¤æ‚åº¦å’Œé£é™©ç­‰çº§
- [ ] å¤‡ä»½åŸå§‹ TypeScript æ–‡ä»¶
- [ ] æ£€æŸ¥æ¨¡å—çš„ä¾èµ–å…³ç³»
- [ ] ç¡®è®¤æµ‹è¯•è¦†ç›–æƒ…å†µ

### è¿ç§»è¿‡ç¨‹
- [ ] é‡å‘½åæ–‡ä»¶æ‰©å±•åï¼ˆ.ts â†’ .jsï¼‰
- [ ] ç§»é™¤ç±»å‹æ³¨è§£å’Œæ¥å£å¯¼å…¥
- [ ] æ·»åŠ  JSDoc æ³¨é‡Šï¼ˆå¯é€‰ï¼‰
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] éªŒè¯åŠŸèƒ½æ­£å¸¸

### è¿ç§»åéªŒè¯
- [ ] è¿è¡Œå¼€å‘æœåŠ¡å™¨æµ‹è¯•
- [ ] æ‰§è¡Œæ„å»ºæµç¨‹
- [ ] è¿è¡Œç›¸å…³æµ‹è¯•ç”¨ä¾‹
- [ ] æ£€æŸ¥æ§åˆ¶å°é”™è¯¯
- [ ] éªŒè¯ä¸šåŠ¡åŠŸèƒ½

## ğŸ› ï¸ è¿ç§»å·¥å…·å’Œè„šæœ¬

### æ‰¹é‡é‡å‘½åè„šæœ¬
```bash
#!/bin/bash
# rename-utils.sh - æ‰¹é‡é‡å‘½å utils ç›®å½•ä¸‹çš„æ–‡ä»¶

cd src/utils
for file in *.ts; do
  if [ "$file" != "*.ts" ]; then
    mv "$file" "${file%.ts}.js"
    echo "Renamed: $file â†’ ${file%.ts}.js"
  fi
done
```

### ç±»å‹æ³¨è§£æ¸…ç†è„šæœ¬
```javascript
// clean-types.js - ç®€å•çš„ç±»å‹æ³¨è§£æ¸…ç†å·¥å…·
const fs = require('fs')
const path = require('path')

function cleanTypeAnnotations(filePath) {
  let content = fs.readFileSync(filePath, 'utf8')
  
  // ç§»é™¤ç®€å•çš„ç±»å‹æ³¨è§£
  content = content.replace(/: string/g, '')
  content = content.replace(/: number/g, '')
  content = content.replace(/: boolean/g, '')
  content = content.replace(/: any/g, '')
  
  // ç§»é™¤ import type è¯­å¥
  content = content.replace(/import type .+/g, '')
  
  fs.writeFileSync(filePath, content)
}
```

## ğŸ“ˆ è¿ç§»è¿›åº¦è·Ÿè¸ª

### è¿›åº¦æŒ‡æ ‡
- **æ–‡ä»¶è¿ç§»ç‡**ï¼šå·²è¿ç§»æ–‡ä»¶æ•° / æ€»æ–‡ä»¶æ•°
- **åŠŸèƒ½å®Œæ•´æ€§**ï¼šè¿ç§»ååŠŸèƒ½æµ‹è¯•é€šè¿‡ç‡
- **å¼€å‘æ•ˆç‡**ï¼šæ–°åŠŸèƒ½å¼€å‘æ—¶é—´å¯¹æ¯”
- **é”™è¯¯ç‡**ï¼šè¿è¡Œæ—¶é”™è¯¯æ•°é‡å˜åŒ–

### é‡Œç¨‹ç¢‘
- [ ] ç¬¬1å‘¨ï¼šå®ŒæˆåŸºç¡€å·¥å…·å‡½æ•°è¿ç§»
- [ ] ç¬¬2å‘¨ï¼šå®Œæˆé¡µé¢ç»„ä»¶ç®€åŒ–
- [ ] ç¬¬3å‘¨ï¼šå®Œæˆé€‰æ‹©æ€§çŠ¶æ€ç®¡ç†è¿ç§»
- [ ] ç¬¬4å‘¨ï¼šå®Œæˆæ–‡æ¡£å’Œè§„èŒƒå»ºç«‹

## âš ï¸ é£é™©æ§åˆ¶

### å›æ»šç­–ç•¥
1. **Git åˆ†æ”¯ç®¡ç†**
   ```bash
   git checkout -b migration/javascript-support
   # è¿ç§»å·¥ä½œåœ¨åˆ†æ”¯è¿›è¡Œ
   ```

2. **åˆ†æ­¥æäº¤**
   ```bash
   git commit -m "feat: migrate utils to JavaScript"
   git commit -m "feat: simplify page components"
   ```

3. **åŠŸèƒ½éªŒè¯**
   - æ¯ä¸ªè¿ç§»æ­¥éª¤åè¿›è¡ŒåŠŸèƒ½æµ‹è¯•
   - ä¿æŒ CI/CD æµæ°´çº¿é€šè¿‡
   - ç›‘æ§ç”Ÿäº§ç¯å¢ƒæŒ‡æ ‡

### åº”æ€¥é¢„æ¡ˆ
- å¦‚æœè¿ç§»å¯¼è‡´ä¸¥é‡é—®é¢˜ï¼Œç«‹å³å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬
- ä¿ç•™åŸå§‹ TypeScript æ–‡ä»¶ä½œä¸ºå¤‡ä»½
- å»ºç«‹å¿«é€Ÿæ¢å¤æœºåˆ¶

## ğŸ“š å‚è€ƒèµ„æº

- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [JSDoc è¯­æ³•æŒ‡å—](https://jsdoc.app/)
- [Vue 3 + JavaScript æœ€ä½³å®è·µ](https://vuejs.org/)
- [é¡¹ç›®å¼€å‘è€…æŒ‡å—](./developer-guide.md)
